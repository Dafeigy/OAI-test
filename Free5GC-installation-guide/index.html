<!DOCTYPE html>
<html>

<head>
  
  <!-- fancybox support -->
  
    
<link rel="stylesheet" href="/js/fancybox/jquery.fancybox.min.css">

  
  <title>构建指南：Free5gc | Openairinterface Archives</title>
  <script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
  <meta name="google-site-verification" content="[object Object]" />
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta itemprop="name" content="Openairinterface Archives" />
  <meta itemprop="description" content="" />
  <meta itemprop="image" content="https://pic.imgdb.cn/item/66b57eafd9c307b7e909094a.webp" />
  <link rel="shortcut icon" href="https://pic.imgdb.cn/item/66b57eafd9c307b7e909094a.webp" type="image/x-icon">
  <!-- keywords and description -->
  
  <meta name="keywords" content="" />
  <meta name="description" content="" />
  
  
<link rel="stylesheet" href="/css/style.css">

  <link rel="stylesheet" href="https://unpkg.com/@waline/client@v3/dist/waline.css"/>
  <script src="//cdn.jsdelivr.net/npm/@waline/client/dist/Waline.min.js"></script>
  <!-- <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> -->
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css" integrity="sha384-KiWOvVjnN8qwAZbuQyWDIbfCLFhLXNETzBQjA/92pIowpC0d2O3nppDGQVgwd2nB" crossorigin="anonymous">
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js" integrity="sha384-0fdwu/T/EQMsQlrHCCHoH10pkPLlKA1jL5dFyUOvB3lfeT2540/2g6YgSi2BL14p" crossorigin="anonymous"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/contrib/auto-render.min.js" integrity="sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR" crossorigin="anonymous"
      onload="renderMathInElement(document.body);"></script>
<meta name="generator" content="Hexo 7.3.0"></head>


<body>
  <div id="container">
    <header>
  <div class="site-title">
    <a href="/">
      Openairinterface Archives
    </a>
  </div>
  
  
  <p class="links">
    
    <a href="https://cybercolyce.cn">
      <img src="/images/links/about.png" alt="About">
    </a>
    
    <a target="_blank" rel="noopener" href="https://github.com/dafeigy">
      <img src="/images/links/github.png" alt="Github">
    </a>
    
    <a href="tencent://message/?uin=1070642765">
      <img src="/images/links/qq.png" alt="QQ">
    </a>
    
    <a href="mailto:1070642765@qq.com">
      <img src="/images/links/email.png" alt="Email">
    </a>
    
  </p>
  
</header>
    <div id="main">
      <article class="post">
  <h3 class="date">
  <time datetime="2024-08-09T12:03:24.289Z">
    Aug 9, 2024
  </time>
</h3>
  <h1>构建指南：Free5gc</h1>
  <p class="post-info">
  
  
  <a href="/Free5GC-installation-guide/#waline" class="post-info-item comment-count waline-comment-count" id="/Free5GC-installation-guide/">获取中...</a>
  <span class="post-info-item view-count waline-visitor-count" id="/Free5GC-installation-guide/">获取中...</span>
  
</p>
  
<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Free5gc/" rel="tag">Free5gc</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%9E%84%E5%BB%BA%E6%8C%87%E5%8D%97/" rel="tag">构建指南</a></li></ul>

  
  <article>
    <h1 id="Free5GC-简介"><a href="#Free5GC-简介" class="headerlink" title="Free5GC 简介"></a>Free5GC 简介</h1><p><img src="https://free5gc.org/assets/logo.png" alt="img"></p>
<p>free5GC 是第五代 (5G) 移动核心网络的开源项目。该项目的最终目标是实现 3GPP Release 15 (R15) 及更高版本中定义的 5G 核心网络 (5GC)。目前，主要贡献者来自国立阳明交通大学（NYCU）。</p>
<p>Free5GC采用当前较为流行的Go语言进行编写，在性能上会比传统基于C&#x2F;C++编写的核心网更强，同时Free5GC有较多的国人与台湾同胞开发者，在语言沟通上、社区氛围更贴近国内开发者，因此Free5GC成为了部署核心网的一个优秀选项。</p>
<h1 id="Free5GC的安装"><a href="#Free5GC的安装" class="headerlink" title="Free5GC的安装"></a>Free5GC的安装</h1><p>Free5GC的安装包含三部分：其一是依赖库，其二是源码编译以及一个web端的核心网可视化管理页面。本文写于2024年8月，当你阅读到这时可能已经发生版本更新。但是这也没关系，你依然可以参考官方的 <a target="_blank" rel="noopener" href="https://github.com/free5gc/free5gc/wiki">安装文档</a> 进行最新版本的安装，我这里推荐使用<code>v3.3.0</code>版本的，因为这个版本经过测试可以在18.04至24.04的Ubuntu上工作。<strong>非v3.3.0版本安装，请严格参考官方的安装文档，否则会造成严重的问题！</strong></p>
<h2 id="前置依赖安装"><a href="#前置依赖安装" class="headerlink" title="前置依赖安装"></a>前置依赖安装</h2><ol>
<li><p><code>Golang 安装</code>。Free5gc使用Go 1.17.8构建，因此需要先安装该版本的Golang，当然可以使用最新版的Go。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">wget https://dl.google.com/go/go1.17.8.linux-amd64.tar.gz</span><br><span class="line"><span class="built_in">sudo</span> tar -C /usr/local -zxvf go1.17.8.linux-amd64.tar.gz</span><br><span class="line"><span class="built_in">mkdir</span> -p ~/go/&#123;bin,pkg,src&#125;</span><br><span class="line"><span class="comment"># The following assume that your shell is bash</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;export GOPATH=$HOME/go&#x27;</span> &gt;&gt; ~/.bashrc</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;export GOROOT=/usr/local/go&#x27;</span> &gt;&gt; ~/.bashrc</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;export PATH=$PATH:$GOPATH/bin:$GOROOT/bin&#x27;</span> &gt;&gt; ~/.bashrc</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;export GO111MODULE=auto&#x27;</span> &gt;&gt; ~/.bashrc</span><br><span class="line"><span class="built_in">source</span> ~/.bashrc</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>数据库依赖</code> : Free5GC使用MongoDB作为数据库。从这一步开始，<strong>请再次确认你打算安装的Free5GC的版本</strong>，如果你确定使用v3.3.0版本，那么请继续往下；否则，请参考官方文档进行安装。</p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt -y update</span><br><span class="line"><span class="built_in">sudo</span> apt -y install mongodb wget git</span><br><span class="line"><span class="built_in">sudo</span> systemctl start mongodb</span><br></pre></td></tr></table></figure>

<ol start="3">
<li><code>控制面依赖</code>: 控制面依赖主要是为GTP相关模块的编译做准备的。使用如下命令安装编译GTP模块的依赖：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt -y update</span><br><span class="line"><span class="built_in">sudo</span> apt -y install git gcc g++ cmake autoconf libtool pkg-config libmnl-dev libyaml-dev</span><br></pre></td></tr></table></figure>

<h2 id="源码下载与编译"><a href="#源码下载与编译" class="headerlink" title="源码下载与编译"></a>源码下载与编译</h2><p>使用如下命令下载源代码。注意<code>v3.3.0</code>就是下载的Free5GC的版本。下载时，请保障下载的终端具备科学上网的能力，否则可能会出现部分网元子仓库下载但有些网元仓库没下载的情况。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~</span><br><span class="line">git <span class="built_in">clone</span> --recursive -b v3.3.0 -j `<span class="built_in">nproc</span>` https://github.com/free5gc/free5gc.git</span><br><span class="line"><span class="built_in">cd</span> free5gc</span><br></pre></td></tr></table></figure>

<p>如果有仓库克隆失败，那么使用 <code>sudo rm -rf free5gc</code> 删除掉目录下<code>free5gc</code>文件夹重新运行上述命令重新下载。当所有代码下载成功后，下一步是编译相关代码。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/free5gc</span><br><span class="line">make</span><br></pre></td></tr></table></figure>



<p>注意如果出现了编译失败，有可能是在上一步的源码下载部分出现问题，也可能是代理终端出现问题：该项目的编译需要依赖一定的科学上网条件进行编译（很抽象，但这就是Golang）。当代码编译完成后，我们还需要再编译GTP模块。在编译GTP前，请注意关闭掉硬件中的安全启动选项，否则会编译失败：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~</span><br><span class="line">git <span class="built_in">clone</span> -b v0.6.8 https://github.com/free5gc/gtp5g.git</span><br><span class="line"><span class="built_in">cd</span> gtp5g</span><br><span class="line">make</span><br><span class="line"><span class="built_in">sudo</span> make install</span><br></pre></td></tr></table></figure>

<h2 id="WebConsole安装"><a href="#WebConsole安装" class="headerlink" title="WebConsole安装"></a>WebConsole安装</h2><p>Webconsole可用于增删改查UE注册信息，提供简单边界的操作接口管理核心网用户。使用如下命令安装前置，主要是<code>Node</code>和<code>Yarn</code>。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt install curl</span><br><span class="line"><span class="built_in">sudo</span> apt remove cmdtest</span><br><span class="line"><span class="built_in">sudo</span> apt remove yarn</span><br><span class="line">curl -sS https://dl.yarnpkg.com/debian/pubkey.gpg | <span class="built_in">sudo</span> apt-key add -</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;deb https://dl.yarnpkg.com/debian/ stable main&quot;</span> | <span class="built_in">sudo</span> <span class="built_in">tee</span> /etc/apt/sources.list.d/yarn.list</span><br><span class="line">curl -sL https://deb.nodesource.com/setup_20.x | <span class="built_in">sudo</span> -E bash -</span><br><span class="line"><span class="built_in">sudo</span> apt-get update</span><br><span class="line"><span class="built_in">sudo</span> apt-get install -y nodejs yarn</span><br></pre></td></tr></table></figure>

<p>当一切就绪后，如下命令编译Webconsole：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/free5gc</span><br><span class="line"><span class="built_in">sudo</span> make webconsole</span><br></pre></td></tr></table></figure>

<h1 id="简单使用"><a href="#简单使用" class="headerlink" title="简单使用"></a>简单使用</h1><p>使用如下的命令可以简单验证系统是否成功安装。</p>
<h2 id="运行WebConsole"><a href="#运行WebConsole" class="headerlink" title="运行WebConsole"></a>运行WebConsole</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/free5gc/webconsole</span><br><span class="line">./bin/webconsole</span><br></pre></td></tr></table></figure>
<p>打开浏览器跳转至 <code>http://127.0.0.1:5000</code>端口，输入账户 <code>admin</code>和密码 <code>free5gc</code>，如果成功进入则说明控制台成功安装并运行。</p>
<p><img src="https://pic.imgdb.cn/item/66b71a61d9c307b7e9a2a530.png" alt="image-20240810154423564"></p>
<p>此时如果出现白屏，则有可能是部分资源未能成功从CDN处加载。挂上梯子后再刷新页面：</p>
<p><img src="https://pic.imgdb.cn/item/66b71ac5d9c307b7e9a30f96.png"></p>
<h2 id="运行Free5gc核心网"><a href="#运行Free5gc核心网" class="headerlink" title="运行Free5gc核心网"></a>运行Free5gc核心网</h2><p>新建一个终端，输入如下指令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/free5gc</span><br><span class="line"><span class="built_in">sudo</span> ./run.sh</span><br></pre></td></tr></table></figure>

<p>如果没有报错，则说明核心网启动无恙。不要关闭该终端，否则整个核心网会有部分网元停止运行。</p>
<p><img src="https://pic.imgdb.cn/item/66b71b17d9c307b7e9a35a0d.png" alt="run free5gc"></p>
<h2 id="退出Free5gc核心网"><a href="#退出Free5gc核心网" class="headerlink" title="退出Free5gc核心网"></a>退出Free5gc核心网</h2><p>如果在启动Free5gc核心网时遇到问题，在按下<code>ctrl+c</code>后还需关闭掉其他的一些已启动的进程：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/free5gc</span><br><span class="line"><span class="built_in">sudo</span> ./force_kill.sh</span><br></pre></td></tr></table></figure>
  </article>
  
</article>


<div id="waline"></div>

    </div>
  </div>
  <footer>
  
  
  <p id="busuanzi_container_site_pv">
    本站访问量 <span id="busuanzi_value_site_pv">获取中...</span>
  </p>
  
  <p>
    Made by <a target="_blank" rel="noopener" href="https://hexo.io">Cybersh1t</a> | Theme <a target="_blank" rel="noopener" href="https://github.com/syy11cn/hexo-theme-linear">Linear</a> 
  </p>
</footer>
  
  <canvas id="c_n6" width="314" height="731" style="position: fixed; top: 0px; left: 0px; z-index: -1; opacity: 0.5;"></canvas>
  <script z-index="-1" color="f3f3f3" opacity="0.8" count="10" src="https://cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"></script>
  
  
    <script type="text/javascript" src="/js/fancybox/jquery.fancybox.min.js"></script>
    <script type="text/javascript" src="/js/wrapImage.js"></script>
  
  <script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js">
  </script>
  <script type="module">
  import { init } from 'https://unpkg.com/@waline/client@v3/dist/waline.js';

  init({
      el: '#waline',
      placeholder: '请文明评论呀^_^',
      avatar: 'mm',
      visitor: true,
      requiredFields: ['nick', 'mail'],
      serverURL: 'https://www.cybercolyce.space/',
      emoji: [
        '',
        'https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/qq',
        '',
        '',
        '',
        '',
      ]
    });
  
  </script>
  <script>
    Waline({
      el: '#waline',
      placeholder: '请文明评论呀^_^',
      avatar: 'mm',
      visitor: true,
      requiredFields: ['nick', 'mail'],
      serverURL: 'https://www.cybercolyce.space/',
      emoji: [
        '',
        'https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/qq',
        '',
        '',
        '',
        '',
      ]
    });
  </script>
</body>

</html>